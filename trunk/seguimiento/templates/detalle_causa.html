{% extends "base.html" %}
{% block title %}Caso {{ causa.nombre_caso }}{% endblock %}
{% block header %} 
<link rel="stylesheet" href="/datos/css/ui.tabs.css" type="text/css" media="screen">
<script type="text/javascript" src="/datos/js/jquery/ui.tabs.js"></script>

<script type="text/javascript" src="/datos/js/jquery/jquery.ingrid-0.9.2.js"></script>

<link href="/datos/css/ingrid.css" rel="stylesheet" type="text/css" />


<script>

$(document).ready(function() {

//oculto algunas layers
  $('#masinfo').hide();
  $('#form-seguimiento').hide();
 
 //armo las pestañas
    $("#tabs > ul").tabs();
 
 // toggles formulario seguimiento
  $('a#form-toggle').click(function() {
      $('#form-seguimiento').toggle(400);
	return false;
  });


 // toggles masinfo
  $('a#masinfo-toggle').click(function() {
      $('#masinfo').toggle();
      if ($(this).text()=="Ver detalles"){
          $(this).text("Ocultar detalles");
       }else{
          $(this).text("Ver detalles");
     }

	return false;
  });  
   
});
</script>

<script type="text/javascript">
$(document).ready(
	function() {
		
		// create the grid
		// returns a jQ object with a 'g' property - that's ingrid
		var mygrid1 = $("#seguimiento1").ingrid({ 
										url: '/tabla_ajax/{{ causa.pk }}/',
										//rowClasses: ['grid-row-style1'],
										colWidths: [80,80,100,60,400],
										
										/*onRowSelect: function(tr, selected){											
											var str 		= selected ? 'SELECTED' : 'UNSELECTED';
											var tr_html	= $(tr).html();											
											alert( str + ' Row. HTML is : ' + tr_html);												
										}										*/										
										
										paging: false,
                                        sorting: true 
									});
		

		$('#jump20').click(function(){
			// the 'g' object is ingrid - call methods like so:
			mygrid1.g.p.setPage(20)
		});
		
		$('#sel-rows').click(function(){
			// the 'g' object is ingrid - call methods like so:
			var rows = mygrid1.g.getSelectedRows();			
			for (i=0; i<rows.length; i++) {
				alert( $(rows[i]).html() );
			}			
		});
				
	}
); 
</script>
</script>

 
{% endblock %}

{% block contenido %}

{% if causa %}

					<h2>Caso {{ causa.nombre_caso }} <a href="/admin/seguimiento/caso/{{ causa.id }}/" class="peque">Editar</a></h2> {{ causa.caratula }} 
					<div class="derecha"><a href="#" id="masinfo-toggle" class="peque">Ver detalles</a></div>
                    <div id="masinfo">
                    <table>

                    <tr><td><strong>Juzgado:</strong></td><td> <a href="/juzgados/{{ causa.juzgado.id }}/" > {{ causa.juzgado }} </a></td></tr>
                    <tr><td><strong>Fiscal:</strong></td><td> <a href="/fiscales/{{ causa.fiscal.id }}/" > {{ causa.fiscal }} </a></td></tr>

                   <tr><td valign="top"><strong>Querellante/s:</strong></td> <td> <ul>{% for querellante in listas.querellantes %} <li> <a href="/querellantes/{{ querellante.id }}/" > {{ querellante }} </a></li>{% endfor %}</ul></td></tr>
                    <tr><td valign="top"><strong>Imputados/s:</strong></td> <td> <ul>{% for imputado in listas.imputados %} <li><a href="/imputados/{{ imputado.id }}/" > {{ imputado }} </a></li>{% endfor %}</ul></td></tr>                    
                    <tr><td valign="top"><strong>Jovenes/s:</strong></td> <td> <ul>{% for joven in listas.jovenes %} <li><a href="/jovenes/{{ joven.id }}/" > {{ joven }} </a></li>{% endfor %}</ul></td></tr>                    
                    </table>

                					

                    </div>
                    

                

        <div id="tabs" >
            <ul>
                <li><a href="#tab-1"><span>Seguimiento</span></a></li>
                <li><a href="#tab-2"><span>Punteo</span></a></li>
                <li><a href="#tab-3"><span>Incidentes</span></a></li>
            </ul>
            


            {# pestaña 0: Seguimiento basado en ingrid #}            
            <div id="tab-1">
                
                <a id="form-toggle" href="#">Agregar nuevo comentario de seguimiento</a><br /><br /><br />
                
                

                <div id="form-seguimiento">
                <form id="seguimiento" method="post" action="." class="formulario">
                {{ form_seguimiento.as_p }}
                                <input type="hidden" name="tipo" value="seguimiento" />
                <p><input type="submit" value="Enviar" class="submit" /></p>
                </form>
                </div>

                <table id="seguimiento1">
                 <thead>
                  <tr>
                   <th>Autor</th>
                   <th>Fecha</th>
                   <th>Categoría</th>
                   <th>Foja</th>
                   <th>Comentario</th>
                  </tr>
                 </thead>
                 <tbody>

                   {% for seguimiento in seguimientos %}
                    <tr class={% if seguimiento.importante %}"grid-row-style2"{% else %}"grid-row-style1"{% endif %}>
                    <td>{{ seguimiento.creado_por }}</td>
                    <td>{{seguimiento.fecha_ingreso|date:"j/m/Y" }}</td>
                    <td>{{ seguimiento.categoria }}</td>
                    <td>{{ seguimiento.foja}}</td>
                    <td>{{ seguimiento.comentario }} </td>
                    </tr>
                   {% endfor %}    
                 </tbody>
                </table>


            </div>
            
            
 



            {# comienza la pestaña 2: Punteo #}
            
            <div id="tab-2">

                <div class="resumen">
                
                {{ causa.punteo }}
                
                <div id="form-punteo">
                <form id="seguimiento" method="post" action="." class="formulario">
                
                {{ form_punteo.as_p }}
                
                
                <input type="hidden" name="tipo" value="punteo" />
                <p><input type="submit" value="Enviar" class="submit"></p>
                </form>
                </div>
                
                
                
                
                
                </div>

            </div>
            <div id="tab-3">
                Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.
                Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.
                Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.
            </div>
            
        </div>

                

               
                
                
                



{% else %}
    <p>No existe este caso.</p>
{% endif %}

{% endblock %}

